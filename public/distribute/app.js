(()=>{"use strict";({112:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,c){function i(e){try{a(o.next(e))}catch(e){c(e)}}function s(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}a((o=o.apply(e,t||[])).next())}))};const t=document.getElementById("error-message");t.textContent="";let n=0;const o=document.getElementById("contacts-form");document.getElementById("submit").addEventListener("click",(r=>e(void 0,void 0,void 0,(function*(){r.preventDefault();const c=new FormData(o),i=Object.fromEntries(c);try{if(n<3){const o=yield fetch("/sendMessage",{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(i)}),r=yield o.json();console.log(r),yield(s=r,e(void 0,void 0,void 0,(function*(){if(t)if(t.textContent="",s.errorsMessages.length>0){let e="Не валидные значения полей: ";for(let t of s.errorsMessages)e+=` ${t.field} `;t.textContent=e,t.classList.add("errtext"),n=0}else t.textContent="Ваше сообщение отправлено.",t.classList.remove("errtext")}))),n++}}catch(e){console.log("------- *** --------","\n",e,"\n","------- *** --------")}var s}))))}})[112]()})();
//# sourceMappingURL=app.js.map